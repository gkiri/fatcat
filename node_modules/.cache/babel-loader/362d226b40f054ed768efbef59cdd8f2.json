{"ast":null,"code":"import _objectSpread from\"/home/gude/Gkiran_Area/wbst/fatcat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/gude/Gkiran_Area/wbst/fatcat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gude/Gkiran_Area/wbst/fatcat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/gude/Gkiran_Area/wbst/fatcat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/home/gude/Gkiran_Area/wbst/fatcat/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import\"../styles/views/Home.css\";import styled from\"styled-components\";import Countdown from\"react-countdown\";import Alert from\"@material-ui/lab/Alert\";import{useEffect,useState}from\"react\";import{Button,CircularProgress,Snackbar}from\"@material-ui/core\";import{LAMPORTS_PER_SOL}from\"@solana/web3.js\";import{useWallet}from\"@solana/wallet-adapter-react\";import{WalletDialogButton}from\"@solana/wallet-adapter-material-ui\";import{awaitTransactionSignatureConfirmation,getCandyMachineState,mintOneToken,shortenAddress}from\"../candy-machine\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ConnectButton=styled(WalletDialogButton)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  & {\\n    border: 1px solid #fff !important;\\n    background-color: transparent !important;\\n    font-size: 1rem;\\n    font-family: EB Garamond,serif,sans-serif !important;\\n    &:hover {\\n      background-color: #fff !important;\\n      color: #1a1a1a;\\n    }\\n  }\\n\"])));var CounterText=styled.span(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\"])));// add your styles here\nvar MintContainer=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\"])));// add your styles here\nvar MintButton=styled(Button)(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  & {\\n    border: 1px solid #fff !important;\\n    background-color: transparent !important;\\n    font-size: 1rem;\\n    font-family: EB Garamond,serif,sans-serif !important;\\n    &:hover {\\n      background-color: #fff !important;\\n      color: #1a1a1a;\\n    }\\n  }\\n\"])));// add your styles here\nvar Home=function Home(props){var _wallet$publicKey;var _useState=useState(),_useState2=_slicedToArray(_useState,2),balance=_useState2[0],setBalance=_useState2[1];//const [remainingItems, setRemainingItems] = useState<number>();\nvar _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isActive=_useState4[0],setIsActive=_useState4[1];// true when countdown completes\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSoldOut=_useState6[0],setIsSoldOut=_useState6[1];// true when items remaining is zero\nvar _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isMinting=_useState8[0],setIsMinting=_useState8[1];// true when user got to press MINT\nvar _useState9=useState({open:false,message:\"\",severity:undefined}),_useState10=_slicedToArray(_useState9,2),alertState=_useState10[0],setAlertState=_useState10[1];var _useState11=useState(new Date(props.startDate)),_useState12=_slicedToArray(_useState11,2),startDate=_useState12[0],setStartDate=_useState12[1];var wallet=useWallet();var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),candyMachine=_useState14[0],setCandyMachine=_useState14[1];var onMint=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var mintTxId,status,message,_balance;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setIsMinting(true);if(!(wallet.connected&&(candyMachine===null||candyMachine===void 0?void 0:candyMachine.program)&&wallet.publicKey)){_context.next=10;break;}_context.next=5;return mintOneToken(candyMachine,props.config,wallet.publicKey,props.treasury);case 5:mintTxId=_context.sent;_context.next=8;return awaitTransactionSignatureConfirmation(mintTxId,props.txTimeout,props.connection,\"singleGossip\",false);case 8:status=_context.sent;if(!(status===null||status===void 0?void 0:status.err)){setAlertState({open:true,message:\"Congratulations! Mint succeeded!\",severity:\"success\"});}else{setAlertState({open:true,message:\"Mint failed! Please try again!\",severity:\"error\"});}case 10:_context.next=17;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);// TODO: blech:\nmessage=_context.t0.msg||\"Minting failed! Please try again!\";if(!_context.t0.msg){if(_context.t0.message.indexOf(\"0x138\")){}else if(_context.t0.message.indexOf(\"0x137\")){message=\"SOLD OUT!\";}else if(_context.t0.message.indexOf(\"0x135\")){message=\"Insufficient funds to mint. Please fund your wallet.\";}}else{if(_context.t0.code===311){message=\"SOLD OUT!\";setIsSoldOut(true);}else if(_context.t0.code===312){message=\"Minting period hasn't started yet.\";}}setAlertState({open:true,message:message,severity:\"error\"});case 17:_context.prev=17;if(!(wallet===null||wallet===void 0?void 0:wallet.publicKey)){_context.next=23;break;}_context.next=21;return props.connection.getBalance(wallet===null||wallet===void 0?void 0:wallet.publicKey);case 21:_balance=_context.sent;setBalance(_balance/LAMPORTS_PER_SOL);case 23:setIsMinting(false);return _context.finish(17);case 25:case\"end\":return _context.stop();}}},_callee,null,[[0,12,17,25]]);}));return function onMint(){return _ref.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _balance2;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(wallet===null||wallet===void 0?void 0:wallet.publicKey)){_context2.next=5;break;}_context2.next=3;return props.connection.getBalance(wallet.publicKey);case 3:_balance2=_context2.sent;setBalance(_balance2/LAMPORTS_PER_SOL);case 5:case\"end\":return _context2.stop();}}},_callee2);}))();},[wallet,props.connection]);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var anchorWallet,_yield$getCandyMachin,candyMachine,goLiveDate,itemsRemaining;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:anchorWallet={publicKey:wallet.publicKey,signAllTransactions:wallet.signAllTransactions,signTransaction:wallet.signTransaction};_context3.next=3;return getCandyMachineState(anchorWallet,props.candyMachineId,props.connection);case 3:_yield$getCandyMachin=_context3.sent;candyMachine=_yield$getCandyMachin.candyMachine;goLiveDate=_yield$getCandyMachin.goLiveDate;itemsRemaining=_yield$getCandyMachin.itemsRemaining;if(!(!wallet||!wallet.publicKey||!wallet.signAllTransactions||!wallet.signTransaction)){_context3.next=9;break;}return _context3.abrupt(\"return\");case 9:setIsSoldOut(itemsRemaining===0);setStartDate(goLiveDate);setCandyMachine(candyMachine);case 12:case\"end\":return _context3.stop();}}},_callee3);}))();},[wallet,props.candyMachineId,props.connection]);return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"section\",{className:\"\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-center\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"w-50\",src:\"images/home-title.svg\",alt:\"\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"Presale Wave-1 Ended. Wave-2 Coming Soon...!\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-white-50\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Magic Peacocks\"}),\" are unique algorithmically generated 5555 NFT's on Solana Blockchain. Each magic peacock has different traits, gene rank, magic powers and no peacock has similar traits. All these NFTs are integrated in to Virtual Reality game.we are giving back 50% marketplace sales revenue to Peacock Holders. \"]})]})})})}),/*#__PURE__*/_jsx(\"section\",{className:\"mb-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center justify-content-center text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"me-3 text-start\",children:[wallet.connected&&/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[\"Address: \",shortenAddress(((_wallet$publicKey=wallet.publicKey)===null||_wallet$publicKey===void 0?void 0:_wallet$publicKey.toBase58())||\"\")]}),wallet.connected&&/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[\"Balance: \",(balance||0).toLocaleString(),\" SOL\"]})]}),/*#__PURE__*/_jsx(MintContainer,{children:!wallet.connected?/*#__PURE__*/_jsx(ConnectButton,{children:\"CONNECT WALLET\"}):/*#__PURE__*/_jsx(MintButton,{disabled:isSoldOut||isMinting||!isActive,onClick:onMint,variant:\"contained\",children:isSoldOut?\"SOLD OUT\":isActive?isMinting?/*#__PURE__*/_jsx(CircularProgress,{size:25}):\"MINT\":/*#__PURE__*/_jsx(Countdown,{date:startDate,onMount:function onMount(_ref4){var completed=_ref4.completed;return completed&&setIsActive(true);},onComplete:function onComplete(){return setIsActive(true);},renderer:renderCounter})})})]})})})}),/*#__PURE__*/_jsx(\"section\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100\",src:\"images/example-one.png\",alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100\",src:\"images/example-two.png\",alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100\",src:\"images/example-three.png\",alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100\",src:\"images/example-four.jpg\",alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100\",src:\"images/example-five.jpg\",alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-100\",src:\"images/example-six.jpg\",alt:\"\"})})]})}),/*#__PURE__*/_jsx(\"section\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-2\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-10\",src:\"images/example-seven.png\",alt:\"\"})})})}),/*#__PURE__*/_jsx(Snackbar,{open:alertState.open,autoHideDuration:6000,onClose:function onClose(){return setAlertState(_objectSpread(_objectSpread({},alertState),{},{open:false}));},children:/*#__PURE__*/_jsx(Alert,{onClose:function onClose(){return setAlertState(_objectSpread(_objectSpread({},alertState),{},{open:false}));},severity:alertState.severity,children:alertState.message})})]});};var renderCounter=function renderCounter(_ref5){var days=_ref5.days,hours=_ref5.hours,minutes=_ref5.minutes,seconds=_ref5.seconds,completed=_ref5.completed;return/*#__PURE__*/_jsxs(CounterText,{children:[hours,\" hours, \",minutes,\" minutes, \",seconds,\" seconds\"]});};export default Home;","map":{"version":3,"sources":["/home/gude/Gkiran_Area/wbst/fatcat/src/views/Home.tsx"],"names":["styled","Countdown","Alert","useEffect","useState","Button","CircularProgress","Snackbar","LAMPORTS_PER_SOL","useWallet","WalletDialogButton","awaitTransactionSignatureConfirmation","getCandyMachineState","mintOneToken","shortenAddress","ConnectButton","CounterText","span","MintContainer","div","MintButton","Home","props","balance","setBalance","isActive","setIsActive","isSoldOut","setIsSoldOut","isMinting","setIsMinting","open","message","severity","undefined","alertState","setAlertState","Date","startDate","setStartDate","wallet","candyMachine","setCandyMachine","onMint","connected","program","publicKey","config","treasury","mintTxId","txTimeout","connection","status","err","msg","indexOf","code","getBalance","anchorWallet","signAllTransactions","signTransaction","candyMachineId","goLiveDate","itemsRemaining","toBase58","toLocaleString","completed","renderCounter","days","hours","minutes","seconds"],"mappings":"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","sourcesContent":["import \"../styles/views/Home.css\";\nimport * as anchor from \"@project-serum/anchor\";\nimport styled from \"styled-components\";\nimport Countdown from \"react-countdown\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport { useEffect, useState } from \"react\";\nimport { Button, CircularProgress, Snackbar } from \"@material-ui/core\";\nimport { LAMPORTS_PER_SOL } from \"@solana/web3.js\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport { WalletDialogButton } from \"@solana/wallet-adapter-material-ui\";\nimport { CandyMachine, awaitTransactionSignatureConfirmation, getCandyMachineState, mintOneToken, shortenAddress } from \"../candy-machine\";\n\nconst ConnectButton = styled(WalletDialogButton)`\n  & {\n    border: 1px solid #fff !important;\n    background-color: transparent !important;\n    font-size: 1rem;\n    font-family: EB Garamond,serif,sans-serif !important;\n    &:hover {\n      background-color: #fff !important;\n      color: #1a1a1a;\n    }\n  }\n`;\nconst CounterText = styled.span``; // add your styles here\nconst MintContainer = styled.div``; // add your styles here\nconst MintButton = styled(Button)`\n  & {\n    border: 1px solid #fff !important;\n    background-color: transparent !important;\n    font-size: 1rem;\n    font-family: EB Garamond,serif,sans-serif !important;\n    &:hover {\n      background-color: #fff !important;\n      color: #1a1a1a;\n    }\n  }\n`; // add your styles here\n\nexport interface HomeProps {\n  candyMachineId: anchor.web3.PublicKey;\n  config: anchor.web3.PublicKey;\n  connection: anchor.web3.Connection;\n  startDate: number;\n  treasury: anchor.web3.PublicKey;\n  txTimeout: number;\n}\n\nconst Home = (props: HomeProps) => {\n  const [balance, setBalance] = useState<number>();\n  //const [remainingItems, setRemainingItems] = useState<number>();\n\n  const [isActive, setIsActive] = useState(false); // true when countdown completes\n  const [isSoldOut, setIsSoldOut] = useState(false); // true when items remaining is zero\n  const [isMinting, setIsMinting] = useState(false); // true when user got to press MINT\n\n  const [alertState, setAlertState] = useState<AlertState>({\n    open: false,\n    message: \"\",\n    severity: undefined,\n  });\n\n  const [startDate, setStartDate] = useState(new Date(props.startDate));\n\n  const wallet = useWallet();\n  const [candyMachine, setCandyMachine] = useState<CandyMachine>();\n\n  const onMint = async () => {\n    try {\n      setIsMinting(true);\n      if (wallet.connected && candyMachine?.program && wallet.publicKey) {\n        const mintTxId = await mintOneToken(\n          candyMachine,\n          props.config,\n          wallet.publicKey,\n          props.treasury\n        );\n\n        const status = await awaitTransactionSignatureConfirmation(\n          mintTxId,\n          props.txTimeout,\n          props.connection,\n          \"singleGossip\",\n          false\n        );\n\n        if (!status?.err) {\n          setAlertState({\n            open: true,\n            message: \"Congratulations! Mint succeeded!\",\n            severity: \"success\",\n          });\n        } else {\n          setAlertState({\n            open: true,\n            message: \"Mint failed! Please try again!\",\n            severity: \"error\",\n          });\n        }\n      }\n    } catch (error: any) {\n      // TODO: blech:\n      let message = error.msg || \"Minting failed! Please try again!\";\n      if (!error.msg) {\n        if (error.message.indexOf(\"0x138\")) {\n        } else if (error.message.indexOf(\"0x137\")) {\n          message = `SOLD OUT!`;\n        } else if (error.message.indexOf(\"0x135\")) {\n          message = `Insufficient funds to mint. Please fund your wallet.`;\n        }\n      } else {\n        if (error.code === 311) {\n          message = `SOLD OUT!`;\n          setIsSoldOut(true);\n        } else if (error.code === 312) {\n          message = `Minting period hasn't started yet.`;\n        }\n      }\n\n      setAlertState({\n        open: true,\n        message,\n        severity: \"error\",\n      });\n    } finally {\n      if (wallet?.publicKey) {\n        const balance = await props.connection.getBalance(wallet?.publicKey);\n        setBalance(balance / LAMPORTS_PER_SOL);\n      }\n      setIsMinting(false);\n    }\n  };\n\n  useEffect(() => {\n    (async () => {\n      if (wallet?.publicKey) {\n        const balance = await props.connection.getBalance(wallet.publicKey);\n        setBalance(balance / LAMPORTS_PER_SOL);\n      }\n    })();\n  }, [wallet, props.connection]);\n\n  useEffect(() => {\n    (async () => {\n\n      const anchorWallet = {\n        publicKey: wallet.publicKey,\n        signAllTransactions: wallet.signAllTransactions,\n        signTransaction: wallet.signTransaction,\n      } as anchor.Wallet;\n\n      const { candyMachine, goLiveDate, itemsRemaining } =\n        await getCandyMachineState(\n          anchorWallet,\n          props.candyMachineId,\n          props.connection\n        );\n\n      //Presale code \n      //Total we have :2000\n      //Presale:1500 \n      //setRemainingItems(itemsRemaining-933);\n      //After presale code\n      \n\n      if (\n        !wallet ||\n        !wallet.publicKey ||\n        !wallet.signAllTransactions ||\n        !wallet.signTransaction\n      ) {\n        return;\n      }\n\n      setIsSoldOut(itemsRemaining === 0);\n      setStartDate(goLiveDate);\n      setCandyMachine(candyMachine);\n    })();\n  }, [wallet, props.candyMachineId, props.connection]);\n\n  return (\n    <main>\n      <section className=\"\">\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <div className=\"mt-4 text-center\">\n              <img className=\"w-50\" src=\"images/home-title.svg\" alt=\"\" />\n              <h4>Presale Wave-1 Ended. Wave-2 Coming Soon...!</h4>\n              <p className=\"text-white-50\"><b>Magic Peacocks</b> are unique algorithmically generated 5555 NFT's on Solana Blockchain. Each magic peacock has different traits, gene rank, magic powers and no peacock has similar traits. All these NFTs are integrated in to Virtual Reality game.we are giving back 50% marketplace sales revenue to Peacock Holders. </p>\n            </div>\n          </div>\n        </div>\n      </section>\n      <section className=\"mb-5\">\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <div className=\"d-flex align-items-center justify-content-center text-center\">\n              <div className=\"me-3 text-start\">\n                {wallet.connected && (<p className=\"mb-0\">Address: {shortenAddress(wallet.publicKey?.toBase58() || \"\")}</p>)}\n                {wallet.connected && (<p className=\"mb-0\">Balance: {(balance || 0).toLocaleString()} SOL</p>)}\n              </div>\n              <MintContainer>\n                {\n                  !wallet.connected ?\n                    (\n                      <ConnectButton>CONNECT WALLET</ConnectButton>\n                    ) :\n                    (\n                      <MintButton\n                        disabled={isSoldOut || isMinting || !isActive}\n                        onClick={onMint}\n                        variant=\"contained\"\n                      >\n                        {isSoldOut ? (\n                          \"SOLD OUT\"\n                        ) : isActive ? (\n                          isMinting ? (\n                            <CircularProgress size={25} />\n                          ) : (\n                            \"MINT\"\n                          )\n                        ) : (\n                          <Countdown\n                            date={startDate}\n                            onMount={({ completed }) => completed && setIsActive(true)}\n                            onComplete={() => setIsActive(true)}\n                            renderer={renderCounter}\n                          />\n                        )}\n                      </MintButton>\n                    )}\n              </MintContainer>\n            </div>\n          </div>\n        </div>\n      </section>\n      <section className=\"mb-4\">\n        <div className=\"row\">\n          <div className=\"col-md-4\">\n            <img className=\"w-100\" src=\"images/example-one.png\" alt=\"\" />\n          </div>\n          <div className=\"col-md-4\">\n            <img className=\"w-100\" src=\"images/example-two.png\" alt=\"\" />\n          </div>\n          <div className=\"col-md-4\">\n            <img className=\"w-100\" src=\"images/example-three.png\" alt=\"\" />\n          </div>\n          <div className=\"col-md-4\">\n            <img className=\"w-100\" src=\"images/example-four.jpg\" alt=\"\" />\n          </div>\n          <div className=\"col-md-4\">\n            <img className=\"w-100\" src=\"images/example-five.jpg\" alt=\"\" />\n          </div>\n          <div className=\"col-md-4\">\n            <img className=\"w-100\" src=\"images/example-six.jpg\" alt=\"\" />\n          </div>\n        </div>\n      </section>\n      \n      <section className=\"mb-4\">\n        <div className=\"row\">\n          <div className=\"col-lg-2\">\n            <img className=\"w-10\" src=\"images/example-seven.png\" alt=\"\" />\n          </div>\n        </div>\n      </section>\n      \n      <Snackbar\n        open={alertState.open}\n        autoHideDuration={6000}\n        onClose={() => setAlertState({ ...alertState, open: false })}\n      >\n        <Alert\n          onClose={() => setAlertState({ ...alertState, open: false })}\n          severity={alertState.severity}\n        >\n          {alertState.message}\n        </Alert>\n      </Snackbar>\n    </main>\n  );\n};\n\ninterface AlertState {\n  open: boolean;\n  message: string;\n  severity: \"success\" | \"info\" | \"warning\" | \"error\" | undefined;\n}\n\nconst renderCounter = ({ days, hours, minutes, seconds, completed }: any) => {\n  return (\n    <CounterText>\n      {hours} hours, {minutes} minutes, {seconds} seconds\n    </CounterText>\n  );\n};\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}